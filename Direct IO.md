## Direct I/O

**Direct I/O란,**

- Direct I/O란 운영체제의 읽기/쓰기 버퍼를 거치지 않고, 직접 I/O를 수행하는 것을 말한다.



**Buffered I/O란,**

- Direct I/O와 반대되는 개념으로서, 프로세스가 파일에서 데이터에 관련된 작업을 할 때 운영체제는 데이터를 기본 메모리로 가져와 데이터를 읽고 변경한 다음 디스크에 저장한다.
- 이런 경우 디스크 접근 시간이 느려 응답시간과 처리량이 좋지 않다. 이로 인해 운영체제는 **버퍼 캐시**라는 구조내에서 주 메모리의 데이터를 버퍼에 넣어 디스크 접근에 따른 단점을 최소화 하는 것이다.



**그럼 왜 Direct I/O를 사용할까?**

- 모두의 예상 처럼 Buffered I/O는 Direct I/O보다 더 나은 성능을 제공하고 있다.
- 그러나, 특정 응용 프로그램은 Buffered I/O의 이점을 얻지 못한다.
  - **데이터베이스는 일반적으로 응용 프로그램 수준에서 데이터 캐싱을 관리하므로 해당 서비스를 구현하기 위해서는 파일 시스템을 필요로하지 않는다.**
  - 이런 경우 Buffered I/O를 사용하게 되면, 운영체제가 버퍼에 넣은 데이터를 데이터베이스가 또 버퍼에 넣어버리므로, Double Copying이 발생하게 된다.
- Double Copying은 CPU 소비를 증가시키고 메모리 오버 헤드를 발생시킨다.
- **Direct I/O는 기존 I/O 방법과 다르게 캐시에 접근하지 않고 디스크를 직접 접근하므로, 요청 스레드의 상태를 sleep 상태로 전환시키고, 디스크 컨트롤러가 커널을 우회하여 데이터를 직접 유저공간에 복사하도록 할 수 있다.**